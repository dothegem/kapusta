# Спецификация расчетов (Configuration as Code)
# На основе .info/full_calc_logic/complete_calculation_breakdown.txt

constants:
  # Основные налоговые ставки
  ndflRatePercent: 13
  pfrRatePercent: 30
  fssRatePercent: 0.2
  usnRatePercent: 6
  osnRatePercent: 22
  osnLowRatePercent: 7
  profitTaxRatePercent: 25
  dividendTaxRatePercent: 15

  # Расчетные коэффициенты
  payrollNetFactor: 0.87
  dividendFactor: 0.85
  cashOutCommissionRate: 0.1765
  cashOutRiskCommissionRate: 0.282

  # Бизнес константы
  averageMonthDays: 30.5
  averageWorkDays: 29.3
  vacationDaysPerYear: 28
  vacationMonthsInYear: 12
  officialSalaryDefault: 45000
  nooCost: 3000

inputs:
  # Базовые данные для расчета
  totalContractGross: 0  # Общая сумма контракта с НДС
  totalSalaryByAvgRateMonth: 0  # Месячный ФОТ по средней ставке
  people: 0  # Количество человек
  totalHoursMonth: 0  # Общее количество часов в месяц
  avgRateHour: 0  # Средняя ставка в час
  extraVmes: 0  # Дополнительные расходы в месяц

scenarios:
  BELUSN:
    name: "Бел УСН"
    description: "Полностью легальная схема на УСН (доходы 6%) с НДС 7%"
    calculations:
      - revenue: "totalContractGross"
      - fotReal: "totalSalaryByAvgRateMonth * 12"
      - fotOfficial: "fotReal / payrollNetFactor"
      - ndfl: "fotOfficial * ndflRatePercent / 100"
      - pfr: "fotOfficial * pfrRatePercent / 100"
      - fss: "fotOfficial * fssRatePercent / 100"
      - payrollTaxes: "ndfl + pfr + fss"
      - vatDeduction: "revenue / (100 + osnLowRatePercent) * osnLowRatePercent"
      - usnTax: "(revenue - vatDeduction) * usnRatePercent / 100"
      - netSalary: "fotOfficial - ndfl"
      - totalExpenses: "vatDeduction + usnTax + payrollTaxes + netSalary"
      - profitBeforeDividends: "revenue - totalExpenses"
      - profitNet: "profitBeforeDividends * dividendFactor"
      - rentability: "profitNet / revenue"

  SERUSN:
    name: "Сер УСН"
    description: "Серая схема с минимальной официальной ЗП, остаток дивидендами"
    calculations:
      - revenue: "totalContractGross"
      - fotReal: "totalSalaryByAvgRateMonth * 12"
      - fotOfficial: "officialSalaryDefault * 12"
      - ndfl: "fotOfficial * ndflRatePercent / 100"
      - pfr: "fotOfficial * pfrRatePercent / 100"
      - fss: "fotOfficial * fssRatePercent / 100"
      - payrollTaxes: "ndfl + pfr + fss"
      - vatDeduction: "revenue / (100 + osnLowRatePercent) * osnLowRatePercent"
      - usnTax: "(revenue - vatDeduction) * usnRatePercent / 100"
      - netSalary: "fotOfficial - ndfl"
      - greyAmount: "fotReal - netSalary"
      - dividendTax: "greyAmount / dividendFactor * (dividendTaxRatePercent / 100)"
      - totalExpenses: "vatDeduction + usnTax + payrollTaxes + netSalary + dividendTax"
      - profitBeforeDividends: "revenue - totalExpenses"
      - profitNet: "profitBeforeDividends * dividendFactor"
      - rentability: "profitNet / revenue"

  BELNDS:
    name: "Бел НДС"
    description: "Полностью белая схема на ОСНО с НДС 22% и налогом на прибыль 25%"
    calculations:
      - revenueBase: "totalContractGross / (100 + osnRatePercent) * 100"
      - revenue: "totalContractGross"
      - fotReal: "totalSalaryByAvgRateMonth * 12"
      - fotOfficial: "fotReal / payrollNetFactor"
      - ndfl: "fotOfficial * ndflRatePercent / 100"
      - pfr: "fotOfficial * pfrRatePercent / 100"
      - fss: "fotOfficial * fssRatePercent / 100"
      - payrollTaxes: "ndfl + pfr + fss"
      - vatOut: "revenue / (100 + osnRatePercent) * osnRatePercent"
      - taxableIncome: "revenueBase - payrollTaxes - fotOfficial + ndfl"
      - profitTax: "max(0, taxableIncome * profitTaxRatePercent / 100)"
      - netSalary: "fotOfficial - ndfl"
      - totalExpenses: "vatOut + payrollTaxes + netSalary + profitTax"
      - profitBeforeDividends: "revenue - totalExpenses"
      - profitNet: "profitBeforeDividends * dividendFactor"
      - rentability: "profitNet / revenue"

  SERNDS:
    name: "Сер НДС"
    description: "Серая схема на ОСНО с агрессивной оптимизацией НДС"
    calculations:
      - revenueBase: "totalContractGross / (100 + osnRatePercent) * 100"
      - revenue: "totalContractGross"
      - fotReal: "totalSalaryByAvgRateMonth * 12"
      - fotOfficial: "officialSalaryDefault * 12"
      - ndfl: "fotOfficial * ndflRatePercent / 100"
      - pfr: "fotOfficial * pfrRatePercent / 100"
      - fss: "fotOfficial * fssRatePercent / 100"
      - payrollTaxes: "ndfl + pfr + fss"
      - vatOut: "revenue / (100 + osnRatePercent) * osnRatePercent"
      - vatIn: "vatOut * cashOutRiskCommissionRate"
      - netSalary: "fotOfficial - ndfl"
      - greyAmount: "fotReal - netSalary"
      - dividendTax: "greyAmount / dividendFactor * (dividendTaxRatePercent / 100)"
      - taxableIncome: "revenueBase - payrollTaxes - fotOfficial + ndfl"
      - profitTax: "max(0, taxableIncome * profitTaxRatePercent / 100)"
      - totalExpenses: "vatOut - vatIn + payrollTaxes + netSalary + dividendTax + profitTax"
      - profitBeforeDividends: "revenue - totalExpenses"
      - profitNet: "profitBeforeDividends * dividendFactor"
      - rentability: "profitNet / revenue"

  IPNDS:
    name: "ИП НДС"
    description: "ИП на ОСНО с минимальными официальными выплатами"
    calculations:
      - revenueBase: "totalContractGross / (100 + osnRatePercent) * 100"
      - revenue: "totalContractGross"
      - fotReal: "totalSalaryByAvgRateMonth * 12"
      - fotOfficial: "officialSalaryDefault * 12"
      - ndfl: "fotOfficial * ndflRatePercent / 100"
      - pfr: "fotOfficial * pfrRatePercent / 100"
      - fss: "fotOfficial * fssRatePercent / 100"
      - payrollTaxes: "ndfl + pfr + fss"
      - vatOut: "revenue / (100 + osnRatePercent) * osnRatePercent"
      - netSalary: "fotOfficial - ndfl"
      - greyAmount: "fotReal - netSalary"
      - cashOutCommission: "greyAmount * cashOutCommissionRate"
      - dividendTax: "(greyAmount + cashOutCommission) / dividendFactor * (dividendTaxRatePercent / 100)"
      - taxableIncome: "revenueBase - payrollTaxes - fotOfficial + ndfl"
      - profitTax: "max(0, taxableIncome * profitTaxRatePercent / 100)"
      - totalExpenses: "vatOut + payrollTaxes + netSalary + cashOutCommission + dividendTax + profitTax"
      - profitBeforeDividends: "revenue - totalExpenses"
      - profitNet: "profitBeforeDividends * dividendFactor"
      - rentability: "profitNet / revenue"
