<!--
# FILE: docs/00_OVERVIEW.md
# VERSION: 1.0.0
# START_MODULE_CONTRACT:
# PURPOSE: Обзорный документ проекта KAPUSTA, описывающий назначение, ключевые компоненты, бизнес-флоу и архитектуру.
# SCOPE: Общее описание системы, навигация по документации.
# INPUT: Нет.
# OUTPUT: Контекст проекта и навигация.
# KEYWORDS_MODULE: [DOMAIN(10): SecurityTenders; PROJECT(10): KAPUSTA; CONCEPT(9): Overview; TECH(5): ChromeExtension]
# LINKS_TO_MODULE: [docs/01_DOMAIN_AND_ROLES.md, docs/10_TECH_ARCHITECTURE_EXTENSION.md]
# LINKS_TO_SPECIFICATION: [Весь проект]
# END_MODULE_CONTRACT
# START_MODULE_MAP:
# SECTION 10 [Назначение проекта] => purpose
# SECTION 9 [Ключевые компоненты] => components
# SECTION 8 [Высокоуровневый бизнес-флоу] => business_flow
# SECTION 7 [Технологическая архитектура] => architecture
# SECTION 6 [Как читать этот набор файлов] => navigation
# END_MODULE_MAP
# START_CHANGE_SUMMARY
# LAST_CHANGE: Добавлена семантическая разметка для AI-агентов.
# IMPORTANT_NOTICE: Этот файл является точкой входа в документацию.
# END_CHANGE_SUMMARY
-->
# 00_OVERVIEW

## 0. Назначение проекта

KAPUSTA — это браузерное расширение и связанная с ним мини‑CRM для тендеров на услуги охраны, которая автоматизирует просчёт сложных схем (зарплата, налоги, cashout, НДС и т.п.) и оформление коммерческих предложений. [file:8]  
Проект закрывает боль «долго и больно считать в Excel», превращая её в полуавтоматический калькулятор с сохранением расчётов, связкой с CRM и Bitrix24. [file:8]  

## 1. Ключевые компоненты

- **Browser extension KAPUSTA**  
  Расширение Chrome (Manifest V3), которое встраивается в страницы тендерных площадок (bidzaar.com, kontur.zakupki.ru и др.), парсит там данные тендера и открывает собственный UI. [file:8]  

- **Калькулятор охранных схем**  
  Модуль вычислений, который на основе входных параметров (ставка, количество постов, режимы налогообложения и схемы выплаты) считает зарплаты, налоги, cashout, маржу и итоговую цену для клиента. [file:8][file:2]  

- **Встроенная CRM KAPUSTA**  
  Лёгкая CRM вокруг сущностей Tender, Deal, CalculationGroup, Calculation, Company, Contact, Task, SiteSurvey, которая хранит расчёты, историю коммуникаций и статусы сделок. [file:8]  

- **Интеграция с Bitrix24**  
  Механизм синхронизации сущностей KAPUSTA (сделки, компании, контакты, задачи) с Bitrix24, чтобы не дублировать работу продаж и использовать текущую экосистему клиента. [file:8]  

- **Интеграции уведомлений (Telegram, Mango)**  
  Каналы, куда летят уведомления и важные события (новые лиды, статусы сделок, напоминания) — как минимум Telegram и Mango‑телефония. [file:8]  

## 2. Высокоуровневый бизнес‑флоу

1. Менеджер открывает тендер на площадке (Bidzaar, Контур и др.), запускает расширение KAPUSTA и парсер вытягивает данные тендера (номер, площадка, закон 44/223, параметры охраны). [file:8]  
2. Расширение предлагает создать/обновить Tender в KAPUSTA CRM и связанный CalculationGroup (группа расчётов по этому тендеру). [file:8]  
3. Менеджер заполняет входные данные калькулятора (ставка, число постов, сменность, белая/серая/ИП‑схема, НДС, дополнительные расходы) и получает рассчитанные схемы (BELUSN, SERUSN, BELNDS, SERNDS, IPNDS и др.). [file:8][file:2]  
4. Выбранный вариант (или несколько) сохраняется в Calculation/CalculationGroup, формируется коммерческое предложение (PDF/таблица) и отправляется клиенту. [file:8]  
5. Встроенная CRM и/или Bitrix24 отслеживают стадии сделки (new, inwork, sent, won, lost), задачи и коммуникации. [file:8]  

## 3. Технологическая архитектура (обзор)

- Расширение Chrome Manifest V3 с `manifest.json`, content‑scripts (parser) и background/foreground логикой. [file:8]  
- Основные js‑модули:  
  - `app.js` — инициализация UI, работа с хранилищем и CRM‑частью. [file:8]  
  - `calculator.js` (или аналог) — чистая логика расчётов на основе calcspec и входных данных. [file:8][file:2]  
  - `parser.js` — content‑script, работающий в контексте страницы тендера и собирающий DOM → JSON. [file:8]  
  - `rules.js` — логика применения calcspec (правила, схемы, константы) к расчёту. [file:8]  
  - `data.js` — справочники, преднастроенные элементы (прайс‑позиции, константы, списки и т.п.). [file:8]  

- Локальное хранилище `chrome.storage.local` хранит настройки (`vatMode`, выбранный `calcspec`/schemaSet, токены интеграций и др.). [file:8]  

Подробности техархитектуры см. в `10_TECH_ARCHITECTURE_EXTENSION.md`. [file:8]  

## 4. Как читать этот набор файлов

- Если нужен общий контекст и роли людей/сущностей — см. `01_DOMAIN_AND_ROLES.md`. [file:8]  
- Если важен путь лида от площадки до сделки — см. `02_USER_FLOW_CRM.md`. [file:8]  
- Если нужна структура CRM и сценарии редактирования — см. `03_CRM_MODEL_AND_EDIT_SCENARIOS.md` и `04_CRM_STATES_AND_STATE_MACHINE.md`. [file:8]  
- Если интересует математика калькулятора и схемы — см. файлы `05`–`09`. [file:2][file:1][file:3][file:4][file:5][file:6][file:7][file:8]  
- Интеграции и реальные примеры см. в `10`–`12`. [file:8]  